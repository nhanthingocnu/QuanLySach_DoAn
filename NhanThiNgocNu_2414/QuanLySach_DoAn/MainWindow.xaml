<Window x:Class="XAML_KHUNG_QLSach.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:XAML_KHUNG_QLSach"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        mc:Ignorable="d"
        Title="MainWindow" Height="650" Width="900">
    <DockPanel Background="#FFF0F8FF">
        <!-- Thanh trạng thái dưới cùng -->
        <StatusBar DockPanel.Dock="Bottom">
            <TextBlock Text="Các thanh taskbar"/>
        </StatusBar>

        <!-- TabControl chính -->
        <TabControl DockPanel.Dock="Top">

            <!-- Tab Quản lý Sách -->
            <TabItem Header="Quản Lý Sách">
                <Grid Background="#FFF0F8FF"
                    Margin="3">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="47*"/>
                        <ColumnDefinition Width="834*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Thông tin sách -->
                    <GroupBox Header="Thông tin Sách" Grid.Row="0" Margin="1,1,0.2,1.2" Grid.ColumnSpan="2">
                        <Grid >

                            <Label Content="Mã Sách" FontSize="19" HorizontalAlignment="Left" Margin="28,10,0,0" VerticalAlignment="Top" Width="100"/>
                            <TextBox x:Name="txt_MaSach" FontSize="19" HorizontalAlignment="Left" Margin="130,10,0,0" VerticalAlignment="Top" Width="200" Height="30"/>

                            <Label Content="Tên Sách" FontSize="19" HorizontalAlignment="Left" Margin="28,50,0,0" VerticalAlignment="Top" Width="100"/>
                            <TextBox x:Name="txt_TenSach" FontSize="19" HorizontalAlignment="Left" Margin="130,50,0,0" VerticalAlignment="Top" Width="200" Height="30"/>

                            <Label Content="Tác Giả" FontSize="19" HorizontalAlignment="Left" Margin="28,90,0,0" VerticalAlignment="Top" Width="100"/>
                            <TextBox x:Name="txt_TacGia" FontSize="19" HorizontalAlignment="Left" Margin="130,90,0,0" VerticalAlignment="Top" Width="200" Height="30"/>

                            <Label Content="Năm Xuất Bản" FontSize="19" HorizontalAlignment="Left" Margin="429,65,0,0" VerticalAlignment="Top" Width="152"/>
                            <DatePicker x:Name="dp_NamXB" HorizontalAlignment="Left" Margin="586,67,0,0" VerticalAlignment="Top" Width="200" FontSize="18"/>

                            <Label Content="Thể Loại" FontSize="19" HorizontalAlignment="Left" Margin="429,10,0,0" VerticalAlignment="Top" Width="100"/>
                            <ComboBox x:Name="cb_TheLoai" 
                                      FontSize="18" 
                                      HorizontalAlignment="Left" 
                                      Margin="586,15,0,0" 
                                      VerticalAlignment="Top" 
                                      Width="200" 
                                      Height="30"
                                      DisplayMemberPath="TenTheLoai"
                                      SelectedValuePath="MaTheLoai"/>

                            <!-- Thêm Số Lượng -->
                            <Label Content="Số Lượng" FontSize="19" HorizontalAlignment="Left" Margin="28,130,0,0" VerticalAlignment="Top" Width="100"/>
                            <TextBox x:Name="txt_SoLuong" FontSize="19" HorizontalAlignment="Left" Margin="128,130,0,0" VerticalAlignment="Top" Width="200" Height="30"/>

                            <!-- Thêm Giá Bán -->
                            <Label Content="Giá Bán" FontSize="19" 
       HorizontalAlignment="Left" Margin="429,125,0,0" 
       VerticalAlignment="Top" Width="100"/>

                            <TextBox x:Name="txt_GiaBan" FontSize="19"
         HorizontalAlignment="Left" Margin="586,125,0,0" 
         VerticalAlignment="Top" Width="200" Height="30"
         PreviewTextInput="txt_GiaBan_PreviewTextInput"
         TextChanged="txt_GiaBan_TextChanged"/>


                            <CheckBox Content="Còn Hàng?" x:Name="chk_TrangThai" IsChecked="True" FontSize="20" HorizontalAlignment="Left" Margin="506,201,0,9.8" VerticalAlignment="Center"/>
                        </Grid>
                    </GroupBox>

                    <!-- Chức năng -->
                    <GroupBox Header="Chức năng" Grid.Row="1" Margin="1,0.8,0.2,1.2" Height="50" Grid.ColumnSpan="2">
                        <Grid Margin="-57,0,57,0">
                            <Button Click="Them_Click" Content="Thêm" HorizontalAlignment="Left" Margin="77,8,0,0" VerticalAlignment="Top"/>
                            <Button Click="Sua_Click" Content="Sửa" HorizontalAlignment="Left" Margin="153,0,0,0.2" VerticalAlignment="Bottom" Width="45"/>
                            <Button Click="Xoa_Click" Content="Xoá" HorizontalAlignment="Left" Margin="235,9,0,-0.8" VerticalAlignment="Center" Width="45"/>
                            <Button Click="Tim_Click" Content="Tìm" HorizontalAlignment="Left" Margin="315,8,0,0.2" VerticalAlignment="Center" Width="45"/>
                            <Button x:Name="btnLamMoi" Content="Làm Mới" Click="LamMoi_Click" HorizontalAlignment="Left" Margin="526,8,0,0.2" Width="65"/>
                            <Button Content="Load Lại" Click="LoadLai_Click" HorizontalAlignment="Left" Margin="645,8,0,0" VerticalAlignment="Top" Width="65" RenderTransformOrigin="0.529,0.833"/>
                            <Button x:Name="btnThoat" Content="Thoát" Click="Thoat_Click" HorizontalAlignment="Left" Margin="757,8,0,0.2" VerticalAlignment="Center" Width="65"/>
                            <TextBox x:Name="txt_Tim" HorizontalAlignment="Left" Height="23" Margin="376,5,0,-0.8" TextWrapping="Wrap" VerticalAlignment="Top" Width="106"/>
                        </Grid>
                    </GroupBox>

                    <!-- Dữ liệu Sách -->
                    <GroupBox Header="Dữ Liệu Sách" Grid.Row="1" Grid.ColumnSpan="2" Margin="0,51.8,-0.8,0.2" Grid.RowSpan="2">
                        <DataGrid x:Name="dg_Sach" 
              AutoGenerateColumns="False" 
              FontSize="18"
              SelectionChanged="dg_Sach_SelectionChanged">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Mã Sách" Width="90" Binding="{Binding MaSach}"/>
                                <DataGridTextColumn Header="Tên Sách" Width="150" Binding="{Binding TenSach}"/>
                                <DataGridTextColumn Header="Tác Giả" Width="150" Binding="{Binding TacGia}"/>
                                <DataGridTextColumn Header="Năm Xuất Bản" Binding="{Binding NamXB, StringFormat=dd/MM/yyyy}"/>
                                <DataGridTextColumn Header="Thể Loại" Binding="{Binding THELOAI.TenTheLoai}"/>
                                <DataGridTextColumn Header="Số Lượng" Width="100" Binding="{Binding SoLuong}"/>
                                <DataGridTextColumn Header="Giá Bán" Width="120" Binding="{Binding GiaBan, StringFormat=N0}"/>
                                <DataGridTextColumn Header="Trạng Thái" Binding="{Binding TrangThai}"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </GroupBox>
                </Grid>
            </TabItem>

            <!-- Tab Hệ Thống -->
            <TabItem Header="Quản Lý Tài Khoản">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="72*"/>
                        <RowDefinition Height="395*"/>
                    </Grid.RowDefinitions>

                    <!-- Quản lý tài khoản -->
                    <GroupBox Background="#F0F0F0"
                        Header="Quản lý tài khoản" Grid.Row="0" Margin="0,0,0,10">
                        <StackPanel 
                            Margin="10" Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button Background= "#81C784" x:Name="btnDoiMatKhau" Content="Đổi mật khẩu" Width="120" Margin="5,5,5,4.6" Click="btnDoiMatKhau_Click"/>
                            <Button Background= "#B71C1C" x:Name="btnDangXuat" Content="Đăng xuất" Width="100" Margin="5" Click="btnDangXuat_Click"/>
                            <Button x:Name="btnThoatt" Content="Thoát" Width="100" Margin="5" Click="btnThoat_Click"/>
                        </StackPanel>
                    </GroupBox>


                    <!-- Backup / Restore dữ liệu -->
                    <GroupBox Background="#F0F0F0"
                        Header="Sao lưu và Phục hồi dữ liệu" Grid.Row="1" Margin="0,0,0,10">
                        <StackPanel Orientation="Horizontal" Margin="10">
                            <Button Background="#F5F1E9" x:Name="btnBackup" Content="Backup" Width="100" Margin="0,0,10,0"/>
                            <Button Background="#F5F1E9" x:Name="btnRestore" Content="Restore" Width="100"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- About -->
                    <GroupBox Background="#E8E8E8" 
                        Header="Thông tin phần mềm" Grid.Row="2" Margin="0,0,0,10">
                        <StackPanel Margin="10">
                            <TextBlock Text="Phần mềm Quản lý Sách" FontSize="16" FontWeight="Bold"/>
                            <TextBlock Text="Phiên bản: 1.0" Margin="0,5,0,0"/>
                            <TextBlock Text="Nhóm phát triển: ..." Margin="0,5,0,0"/>
                            <TextBlock Text="Môn học: CS464" Margin="0,5,0,0"/>
                        </StackPanel>
                    </GroupBox>
                </Grid>
            </TabItem>
        </TabControl>
    </DockPanel>
</Window>
